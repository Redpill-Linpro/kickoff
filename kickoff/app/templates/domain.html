{% include "header.html" %}

<h1>Domain {{ domain }}</h1>

<div class="row">
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Last boot</th>
        <th>Timestamp</th>
        <th>MAC</th>
        <th>IP</th>
        <th>Hostname</th>
        <th>UUID</th>
        <th>DNS</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for i in hosts | sort %}
        <tr>
          <td>{{ i.age }}</td>
          <td>{{ i.registered }}</td>
          <td><a href="/mac/{{ i.mac }}">{{ i.mac }}</a></td>
          <td>{{ i.remote_addr }}</td>
          <td>
            {% if i.hostname %}
              {{ i.hostname }}
            {% else %}
              <small>N/A</small>
            {% endif %}
          </td>
          <td>
            {% if i.uuid %}
              {{ i.uuid }}
            {% else %}
              <small>N/A</small>
            {% endif %}
          </td>
          <td>
            {% if i.reverse %}
              {% if mac %}
                {{ i.reverse }}
              {% else %}
                <a href="/mac/{{ i.mac }}">
                  {{ i.reverse }}
                </a>
              {% endif %}
            {% else %}
              <span class="label label-info">Lookup failed</span>
            {% endif %}
          </td>
          <td>
            {% if i.status == 0 %}
              <a href="/mac/{{ i.mac }}/security"><span class="glyphicon glyphicon-ban-circle" rel="tooltip" title="Permission denied by the security filters"></span></a>
            {% elif i.status == 1 %}
              <a href="/mac/{{ i.mac }}/configuration"><span class="glyphicon glyphicon-eye-open" rel="tooltip" title="The host was discovered"></span></a>
            {% elif i.status == 2 %}
              <a href="/mac/{{ i.mac }}/configuration"><span class="glyphicon glyphicon-hdd" rel="tooltip" title="Served default configuration"></span></a>
            {% elif i.status == 3 %}
              <a href="/mac/{{ i.mac }}/configuration"><span class="glyphicon glyphicon-cloud-download" rel="tooltip" title="Served custom configuration"></span></a>
            {% endif %}
    
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#{{ i.id }}">
              <span class="glyphicon glyphicon-info-sign" rel="tooltip" title="Click to show/hide the iPXE configuration that was served."></span>
            </a>
          </td>
        </tr>
        <tr id="{{ i.id }}" class="panel-collapse collapse">
          <td colspan="8">
            <div>
              <div class="panel-body">
                <pre>{{ i.ipxe }}</pre>
              </div>
            </div>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% include "footer.html" %}
